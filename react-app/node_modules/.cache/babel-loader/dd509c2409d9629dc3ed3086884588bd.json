{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eklavyasharma/Documents/GitHub/react-url-shortner/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/eklavyasharma/Documents/GitHub/react-url-shortner/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/eklavyasharma/Documents/GitHub/react-url-shortner/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{useHistory,Link}from\"react-router-dom\";import{Helmet}from\"react-helmet-async\";import Cookies from\"js-cookie\";import Topbar from\"./sub-components/Topbar\";import Bottombar from\"./sub-components/Bottombar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var alert=document.getElementById(\"alert\");var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var connect,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch(\"http://localhost:4500/login\",{method:\"POST\",body:JSON.stringify({email:email,password:password}),headers:{\"Content-Type\":\"application/json\"},credentials:\"include\"});case 3:connect=_context.sent;_context.next=6;return connect.json();case 6:res=_context.sent;alert.classList.remove(\"hidden\");if(res.message===\"Login Success\"){if(res.token!==\"\"){Cookies.set(\"LJTSK\",res.token,{expires:7,httpOnly:true,secure:true});alert.innerText=\"Please wait...\";history.push(\"/dashboard\");}}else{alert.innerText=res.message;}case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Login / Mini Urls\"})}),/*#__PURE__*/_jsx(Topbar,{value:\"Sign up\",link:\"/\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12 form-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"row g-3 p-4 mx-auto\",style:{maxWidth:\"20rem\"},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h2 p-2\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{id:\"alert\",className:\"alert alert-warning hidden\",role:\"alert\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputEmail\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"inputEmail\",\"aria-describedby\":\"emailHelp\",onChange:function onChange(e){return setEmail(e.target.value);},value:email,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputPassword\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"inputPassword\",onChange:function onChange(e){return setPassword(e.target.value);},value:password,required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button btn btn-primary\",children:\"Sign in\"}),/*#__PURE__*/_jsx(Link,{className:\"link\",to:\"/reset-password\",children:\"Forgot Password\"})]})})]})})})}),/*#__PURE__*/_jsx(Bottombar,{})]});}export default Login;","map":{"version":3,"sources":["/Users/eklavyasharma/Documents/GitHub/react-url-shortner/src/components/Login.js"],"names":["useState","useHistory","Link","Helmet","Cookies","Topbar","Bottombar","Login","alert","document","getElementById","history","email","setEmail","password","setPassword","handleSubmit","e","preventDefault","fetch","method","body","JSON","stringify","headers","credentials","connect","json","res","classList","remove","message","token","set","expires","httpOnly","secure","innerText","push","maxWidth","target","value"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { Helmet } from \"react-helmet-async\";\nimport Cookies from \"js-cookie\";\nimport Topbar from \"./sub-components/Topbar\";\nimport Bottombar from \"./sub-components/Bottombar\";\n\nfunction Login() {\n  const alert = document.getElementById(\"alert\");\n  const history = useHistory();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const connect = await fetch(\"http://localhost:4500/login\", {\n      method: \"POST\",\n      body: JSON.stringify({ email, password }),\n      headers: { \"Content-Type\": \"application/json\" },\n      credentials: \"include\",\n    });\n    const res = await connect.json();\n    alert.classList.remove(\"hidden\");\n    if (res.message === \"Login Success\") {\n      if (res.token !== \"\") {\n        Cookies.set(\"LJTSK\", res.token, {\n          expires: 7,\n          httpOnly: true,\n          secure: true,\n        });\n        alert.innerText = `Please wait...`;\n        history.push(\"/dashboard\");\n      }\n    } else {\n      alert.innerText = res.message;\n    }\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>Login / Mini Urls</title>\n      </Helmet>\n      <Topbar value=\"Sign up\" link=\"/\"></Topbar>\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-lg-12 form-container\">\n            <form\n              className=\"row g-3 p-4 mx-auto\"\n              style={{ maxWidth: \"20rem\" }}\n              onSubmit={handleSubmit}\n            >\n              <h1 className=\"h2 p-2\">Login</h1>\n              <div\n                id=\"alert\"\n                className=\"alert alert-warning hidden\"\n                role=\"alert\"\n              ></div>\n              <div className=\"mb-3 col-md-12\">\n                <label htmlFor=\"inputEmail\" className=\"form-label\">\n                  Email address\n                </label>\n                <input\n                  type=\"email\"\n                  className=\"form-control\"\n                  id=\"inputEmail\"\n                  aria-describedby=\"emailHelp\"\n                  onChange={(e) => setEmail(e.target.value)}\n                  value={email}\n                  required\n                />\n              </div>\n              <div className=\"mb-3 col-md-12\">\n                <label htmlFor=\"inputPassword\" className=\"form-label\">\n                  Password\n                </label>\n                <input\n                  type=\"password\"\n                  className=\"form-control\"\n                  id=\"inputPassword\"\n                  onChange={(e) => setPassword(e.target.value)}\n                  value={password}\n                  required\n                />\n              </div>\n\n              <div className=\"mb-3 col-md-12\">\n                <div className=\"d-flex justify-content-between align-items-center\">\n                  <button type=\"submit\" className=\"button btn btn-primary\">\n                    Sign in\n                  </button>\n                  <Link className=\"link\" to=\"/reset-password\">\n                    Forgot Password\n                  </Link>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n      <Bottombar />\n    </>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}